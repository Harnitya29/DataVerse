<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Promotion Paradox ‚Äî Prescriptive ML Dashboard</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=DM+Sans:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #09090f;
    --surface: #111118;
    --surface2: #18181f;
    --surface3: #1f1f28;
    --accent: #f0c040;
    --accent2: #e05a5a;
    --accent3: #4db8a0;
    --accent4: #7b8af8;
    --accent5: #f97316;
    --text: #e8e8f0;
    --muted: #6a6a8a;
    --border: rgba(255,255,255,0.06);
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: var(--bg); color: var(--text); font-family: 'DM Sans', sans-serif; line-height: 1.6; }

  /* ‚îÄ‚îÄ HERO ‚îÄ‚îÄ */
  .hero {
    padding: 70px 60px 60px;
    border-bottom: 1px solid var(--border);
    position: relative; overflow: hidden;
  }
  .hero::before {
    content: ''; position: absolute; top: -150px; right: -100px;
    width: 600px; height: 600px;
    background: radial-gradient(circle, rgba(77,184,160,0.06) 0%, transparent 65%);
    pointer-events: none;
  }
  .hero::after {
    content: ''; position: absolute; bottom: -100px; left: 200px;
    width: 500px; height: 400px;
    background: radial-gradient(circle, rgba(224,90,90,0.05) 0%, transparent 65%);
    pointer-events: none;
  }
  .hero-top { display: flex; align-items: center; gap: 14px; margin-bottom: 28px; }
  .hero-logo { font-size: 10px; letter-spacing: 2px; text-transform: uppercase; color: var(--muted); }
  .tag {
    display: inline-block; font-size: 10px; font-weight: 700; letter-spacing: 2.5px;
    text-transform: uppercase; color: var(--accent3);
    border: 1px solid rgba(77,184,160,0.4); padding: 4px 12px; border-radius: 20px;
  }
  .tag2 {
    display: inline-block; font-size: 10px; font-weight: 700; letter-spacing: 2.5px;
    text-transform: uppercase; color: var(--accent4);
    border: 1px solid rgba(123,138,248,0.4); padding: 4px 12px; border-radius: 20px;
  }
  .hero h1 {
    font-family: 'Playfair Display', serif;
    font-size: clamp(36px, 5vw, 68px); font-weight: 900; line-height: 1.05;
    max-width: 900px; margin-bottom: 20px;
  }
  .hero h1 .red { color: var(--accent2); }
  .hero h1 .teal { color: var(--accent3); }
  .hero p { font-size: 15px; color: var(--muted); max-width: 720px; line-height: 1.85; margin-bottom: 36px; }
  .hero-stats { display: flex; gap: 50px; flex-wrap: wrap; }
  .stat-item { display: flex; flex-direction: column; }
  .stat-num { font-family: 'Playfair Display', serif; font-size: 30px; font-weight: 700; }
  .stat-label { font-size: 11px; color: var(--muted); text-transform: uppercase; letter-spacing: 1px; margin-top: 2px; }

  /* ‚îÄ‚îÄ ACTS BAR ‚îÄ‚îÄ */
  .acts-bar { display: flex; border-bottom: 1px solid var(--border); }
  .act { flex: 1; padding: 16px 24px; border-right: 1px solid var(--border); cursor: default; transition: background 0.2s; }
  .act:last-child { border-right: none; }
  .act:hover { background: var(--surface); }
  .act-num { font-size: 10px; letter-spacing: 2px; text-transform: uppercase; color: var(--muted); }
  .act-title { font-size: 13px; font-weight: 500; margin-top: 4px; display: flex; align-items: center; gap: 7px; }
  .act-dot { width: 7px; height: 7px; border-radius: 50%; display: inline-block; }
  .act-desc { font-size: 11px; color: var(--muted); margin-top: 3px; }

  /* ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ */
  .main { padding: 0 60px 60px; }
  .section { padding: 52px 0 20px; border-bottom: 1px solid var(--border); }
  .section:last-child { border-bottom: none; }
  .section-header { display: flex; justify-content: space-between; align-items: flex-start; gap: 40px; margin-bottom: 32px; }
  .section-label { font-size: 10px; letter-spacing: 2.5px; text-transform: uppercase; color: var(--accent); margin-bottom: 8px; }
  .section-label.teal { color: var(--accent3); }
  .section-label.blue { color: var(--accent4); }
  .section-label.orange { color: var(--accent5); }
  .section-title { font-family: 'Playfair Display', serif; font-size: 26px; font-weight: 700; line-height: 1.2; }
  .section-insight { font-size: 13.5px; color: var(--muted); max-width: 420px; line-height: 1.8; flex-shrink: 0; text-align: right; }
  .section-insight strong { color: var(--text); }

  /* ‚îÄ‚îÄ CHART CARDS ‚îÄ‚îÄ */
  .chart-card {
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 12px; padding: 28px; position: relative; overflow: hidden;
  }
  .chart-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; }
  .chart-card.gold::before { background: linear-gradient(90deg, var(--accent), transparent); }
  .chart-card.red::before { background: linear-gradient(90deg, var(--accent2), transparent); }
  .chart-card.teal::before { background: linear-gradient(90deg, var(--accent3), transparent); }
  .chart-card.blue::before { background: linear-gradient(90deg, var(--accent4), transparent); }
  .chart-card.orange::before { background: linear-gradient(90deg, var(--accent5), transparent); }
  .chart-card.ml { border-color: rgba(123,138,248,0.25); background: linear-gradient(145deg, var(--surface), #141420); }
  .chart-card.ml::before { background: linear-gradient(90deg, var(--accent4), var(--accent3), transparent); }
  .chart-title { font-size: 14px; font-weight: 600; margin-bottom: 5px; }
  .chart-sub { font-size: 12px; color: var(--muted); margin-bottom: 18px; }

  /* ‚îÄ‚îÄ LAYOUTS ‚îÄ‚îÄ */
  .two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
  .three-col { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; }
  .wide-narrow { display: grid; grid-template-columns: 1.6fr 1fr; gap: 20px; }

  /* ‚îÄ‚îÄ KPI GRID ‚îÄ‚îÄ */
  .kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 28px; }
  .kpi-card {
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 10px; padding: 22px 24px;
  }
  .kpi-label { font-size: 11px; letter-spacing: 1.5px; text-transform: uppercase; color: var(--muted); margin-bottom: 10px; }
  .kpi-value { font-family: 'Playfair Display', serif; font-size: 32px; font-weight: 700; line-height: 1; }
  .kpi-sub { font-size: 12px; color: var(--muted); margin-top: 6px; }
  .kpi-badge { display: inline-block; font-size: 10px; padding: 3px 8px; border-radius: 10px; margin-top: 8px; font-weight: 500; }
  .badge-red { background: rgba(224,90,90,0.15); color: var(--accent2); }
  .badge-gold { background: rgba(240,192,64,0.15); color: var(--accent); }
  .badge-teal { background: rgba(77,184,160,0.15); color: var(--accent3); }
  .badge-blue { background: rgba(123,138,248,0.15); color: var(--accent4); }

  /* ‚îÄ‚îÄ INSIGHT BOX ‚îÄ‚îÄ */
  .insight-box {
    background: var(--surface2); border: 1px solid var(--border);
    border-left: 3px solid var(--accent); border-radius: 0 8px 8px 0;
    padding: 14px 18px; font-size: 13px; color: var(--muted); margin-top: 20px; line-height: 1.7;
  }
  .insight-box strong { color: var(--text); }
  .insight-box.red { border-left-color: var(--accent2); }
  .insight-box.teal { border-left-color: var(--accent3); }
  .insight-box.blue { border-left-color: var(--accent4); }
  .insight-box.orange { border-left-color: var(--accent5); }

  /* ‚îÄ‚îÄ UPLIFT QUADRANT ‚îÄ‚îÄ */
  .uplift-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 3px; margin: 20px 0; }
  .uplift-quad {
    padding: 22px; border-radius: 8px; position: relative;
  }
  .uq-label { font-size: 10px; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 8px; }
  .uq-name { font-family: 'Playfair Display', serif; font-size: 20px; font-weight: 700; margin-bottom: 8px; }
  .uq-pct { font-family: 'Playfair Display', serif; font-size: 36px; font-weight: 900; line-height: 1; margin-bottom: 8px; }
  .uq-desc { font-size: 12px; line-height: 1.6; }
  .uq-action { display: inline-block; font-size: 11px; font-weight: 600; padding: 4px 12px; border-radius: 20px; margin-top: 10px; }

  /* ‚îÄ‚îÄ SEGMENTS ‚îÄ‚îÄ */
  .segment-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 18px; margin-bottom: 24px; }
  .segment-card { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; padding: 24px; position: relative; overflow: hidden; }
  .segment-badge { display: inline-block; font-size: 10px; letter-spacing: 1.5px; text-transform: uppercase; padding: 4px 10px; border-radius: 20px; margin-bottom: 14px; font-weight: 500; }
  .badge-danger { background: rgba(224,90,90,0.15); color: var(--accent2); border: 1px solid rgba(224,90,90,0.2); }
  .badge-safe { background: rgba(77,184,160,0.15); color: var(--accent3); border: 1px solid rgba(77,184,160,0.2); }
  .badge-warn { background: rgba(240,192,64,0.15); color: var(--accent); border: 1px solid rgba(240,192,64,0.2); }
  .segment-name { font-family: 'Playfair Display', serif; font-size: 22px; font-weight: 700; margin-bottom: 10px; }
  .segment-desc { font-size: 13px; color: var(--muted); line-height: 1.7; margin-bottom: 16px; }
  .stat-row { display: flex; gap: 20px; flex-wrap: wrap; }
  .stat { display: flex; flex-direction: column; }
  .stat-val { font-size: 16px; font-weight: 600; }
  .stat-val.up { color: var(--accent3); }
  .stat-val.down { color: var(--accent2); }
  .stat-val.warn { color: var(--accent); }
  .stat-lab { font-size: 11px; color: var(--muted); margin-top: 2px; }

  /* ‚îÄ‚îÄ VERDICT ‚îÄ‚îÄ */
  .verdict {
    background: linear-gradient(135deg, var(--surface) 0%, var(--surface2) 100%);
    border: 1px solid var(--border); border-radius: 16px; padding: 48px 52px;
    position: relative; overflow: hidden; margin-top: 20px;
  }
  .verdict::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, var(--accent4), var(--accent3), var(--accent)); }
  .verdict::after { content: '"'; position: absolute; right: 40px; top: 10px; font-family: 'Playfair Display', serif; font-size: 200px; color: rgba(255,255,255,0.02); line-height: 1; pointer-events: none; }
  .verdict-label { font-size: 10px; letter-spacing: 3px; text-transform: uppercase; color: var(--accent4); margin-bottom: 16px; }
  .verdict-title { font-family: 'Playfair Display', serif; font-size: 26px; font-weight: 700; margin-bottom: 24px; max-width: 800px; line-height: 1.3; }
  .verdict-title span { color: var(--accent3); }
  .verdict p { font-size: 14.5px; color: var(--muted); line-height: 1.9; max-width: 860px; margin-bottom: 16px; }
  .verdict p strong { color: var(--text); }

  /* ‚îÄ‚îÄ REC TABLE ‚îÄ‚îÄ */
  .rec-table { width: 100%; border-collapse: collapse; margin-top: 28px; font-size: 13px; }
  .rec-table th { text-align: left; padding: 12px 16px; font-size: 10px; letter-spacing: 1.5px; text-transform: uppercase; color: var(--muted); border-bottom: 1px solid var(--border); }
  .rec-table td { padding: 14px 16px; border-bottom: 1px solid rgba(255,255,255,0.04); vertical-align: top; line-height: 1.6; }
  .rec-table tr:last-child td { border-bottom: none; }
  .rec-table tr:hover td { background: var(--surface2); }
  .impact-chip { display: inline-block; padding: 3px 10px; border-radius: 20px; font-size: 11px; font-weight: 600; }
  .impact-critical { background: rgba(224,90,90,0.2); color: var(--accent2); }
  .impact-high { background: rgba(77,184,160,0.15); color: var(--accent3); }
  .impact-med { background: rgba(240,192,64,0.15); color: var(--accent); }

  /* ‚îÄ‚îÄ SIMULATOR ‚îÄ‚îÄ */
  .sim-card { background: var(--surface); border: 1px solid rgba(77,184,160,0.2); border-top: 3px solid var(--accent3); border-radius: 12px; padding: 36px; }

  /* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
  .footer { text-align: center; padding: 28px; font-size: 11px; color: var(--muted); letter-spacing: 1px; border-top: 1px solid var(--border); margin-top: 20px; }

  @media (max-width: 900px) {
    .hero, .main { padding: 36px 24px; }
    .two-col, .three-col, .wide-narrow, .kpi-grid, .segment-grid, .uplift-grid { grid-template-columns: 1fr; }
    .acts-bar { flex-wrap: wrap; }
    .section-header { flex-direction: column; gap: 12px; }
    .section-insight { text-align: left; max-width: 100%; }
    .verdict { padding: 32px 24px; }
  }
</style>
</head>
<body>

<!-- ‚îÄ‚îÄ HERO ‚îÄ‚îÄ -->
<div class="hero">
  <div class="hero-top">
    <span class="hero-logo">DataVerse 2026 ¬∑ Department of Statistics ¬∑ MSU Baroda</span>
    <span style="color:var(--accent)">¬∑</span>
    <span class="tag">Prescriptive ML Analytics</span>
    <span class="tag2">CATE ¬∑ Uplift Modeling ¬∑ XGBoost</span>
    <div style="margin-left:auto;text-align:right;">
      <div style="font-family:'Playfair Display',serif;font-size:16px;font-weight:700;color:var(--accent4);letter-spacing:2px;">ENTROPY</div>
      <div style="font-size:10px;color:var(--muted);margin-top:3px;letter-spacing:1px;">Harnitya Narola ¬∑ Meet Karangiya</div>
    </div>
  </div>
  <h1>Stopping the Bleed:<br>From Blanket Discounts<br>to <span class="teal">Uplift Modeling</span></h1>
  <p>Mercato's ‚Çπ148M promotion strategy is subsidizing "Sure Things" ‚Äî customers who would have paid full price anyway. By deploying a CATE (Conditional Average Treatment Effect) Uplift Model, we transition from descriptive damage assessment to prescriptive targeting, reclaiming ‚Çπ65M in destroyed margin without sacrificing actual sales volume.</p>
  <div class="hero-stats">
    <div class="stat-item"><span class="stat-num" style="color:var(--accent2)">‚Çπ148.6M</span><span class="stat-label">Margin Destroyed</span></div>
    <div class="stat-item"><span class="stat-num" style="color:var(--accent)">42%</span><span class="stat-label">Are "Sure Things"</span></div>
    <div class="stat-item"><span class="stat-num" style="color:var(--accent3)">‚Çπ65M</span><span class="stat-label">Recoverable via ML</span></div>
    <div class="stat-item"><span class="stat-num" style="color:var(--accent4)">237,983</span><span class="stat-label">Transactions Analyzed</span></div>
  </div>
</div>

<!-- ‚îÄ‚îÄ ACTS BAR ‚îÄ‚îÄ -->
<div class="acts-bar">
  <div class="act">
    <div class="act-num">Act I</div>
    <div class="act-title"><span class="act-dot" style="background:var(--accent2)"></span>The Bleed</div>
    <div class="act-desc">Descriptive ‚Äî What Happened</div>
  </div>
  <div class="act">
    <div class="act-num">Act II</div>
    <div class="act-title"><span class="act-dot" style="background:var(--accent)"></span>The Root Cause</div>
    <div class="act-desc">Sure Things Cannibalization</div>
  </div>
  <div class="act">
    <div class="act-num">Act III</div>
    <div class="act-title"><span class="act-dot" style="background:var(--accent4)"></span>The ML Solution</div>
    <div class="act-desc">Uplift Modeling ¬∑ CATE</div>
  </div>
  <div class="act">
    <div class="act-num">Act IV</div>
    <div class="act-title"><span class="act-dot" style="background:var(--accent5)"></span>The Churn Predictor</div>
    <div class="act-desc">XGBoost ¬∑ SHAP</div>
  </div>
  <div class="act">
    <div class="act-num">Act V</div>
    <div class="act-title"><span class="act-dot" style="background:var(--accent3)"></span>Live Simulator</div>
    <div class="act-desc">Prescriptive ‚Äî What To Do</div>
  </div>
</div>

<div class="main">

  <!-- ‚îÄ‚îÄ ACT I: THE BLEED ‚îÄ‚îÄ -->
  <div class="section">
    <div class="section-header">
      <div>
        <div class="section-label">Act I ¬∑ The Bleed</div>
        <div class="section-title">The Cost of<br>Cannibalization</div>
      </div>
      <div class="section-insight">
        The finance team was right to worry. <strong>‚Çπ148.6M ‚Äî exactly 25% of gross revenue</strong> ‚Äî was handed to customers who were already going to buy. This is not a marketing problem. It is a <strong>targeting problem.</strong>
      </div>
    </div>

    <div class="kpi-grid">
      <div class="kpi-card">
        <div class="kpi-label">Gross Revenue Illusion</div>
        <div class="kpi-value" style="color:var(--accent)">+18%</div>
        <div class="kpi-sub">Surge that triggered the applause</div>
        <div class="kpi-badge badge-gold">Volume, not value</div>
      </div>
      <div class="kpi-card">
        <div class="kpi-label">Margin Destroyed</div>
        <div class="kpi-value" style="color:var(--accent2)">‚Çπ148.6M</div>
        <div class="kpi-sub">Given away in blanket discounts</div>
        <div class="kpi-badge badge-red">25% of gross revenue</div>
      </div>
      <div class="kpi-card">
        <div class="kpi-label">Control Baseline (No Promo)</div>
        <div class="kpi-value" style="color:var(--accent3)">‚Çπ2,505</div>
        <div class="kpi-sub">What organic demand earns</div>
        <div class="kpi-badge badge-teal">n = 2,315 txns</div>
      </div>
      <div class="kpi-card">
        <div class="kpi-label">Promoted Average</div>
        <div class="kpi-value" style="color:var(--accent2)">‚Çπ1,867</div>
        <div class="kpi-sub">What subsidized demand earns</div>
        <div class="kpi-badge badge-red">‚àí‚Çπ638 per transaction</div>
      </div>
    </div>

    <div class="two-col">
      <div class="chart-card red">
        <div class="chart-title">Margin Compression % by Category ‚Äî Who's Bleeding Most?</div>
        <div class="chart-sub">Horizontal view ¬∑ Worst offender highlighted ¬∑ % lost to discounts annotated per bar</div>
        <canvas id="categoryChart" height="220"></canvas>
        <div style="display:flex;align-items:center;gap:10px;margin-top:14px;padding:10px 14px;background:rgba(224,90,90,0.07);border-radius:8px;border:1px solid rgba(224,90,90,0.15);">
          <span style="font-size:18px;">üìå</span>
          <span style="font-size:12px;color:var(--muted);">Uniform ~25% compression across ALL categories confirms <strong style="color:var(--text)">no category-level optimization exists</strong> ‚Äî every product is discounted identically regardless of margin profile.</span>
        </div>
        <div class="insight-box red">
          üìä <strong>Descriptive finding:</strong> Toys shows the highest absolute margin loss (25.0%). Electronics loses 25.1% on a high unit-price item ‚Äî meaning each Electronics transaction destroys more absolute rupees than any other category. The uniformity is the story.
        </div>
      </div>
      <div class="chart-card teal">
        <div class="chart-title">Churn Rate: Promoted vs Control ‚Äî The Loyalty Test</div>
        <div class="chart-sub">Does ‚Çπ148.6M in discounts actually retain customers?</div>

        <!-- BIG STAT CARD FORMAT -->
        <div style="display:grid;grid-template-columns:1fr auto 1fr;gap:0;margin:24px 0;align-items:center;">
          <div style="text-align:center;padding:28px 20px;background:rgba(224,90,90,0.07);border-radius:12px 0 0 12px;border:1px solid rgba(224,90,90,0.15);">
            <div style="font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--accent2);margin-bottom:10px;">Promoted Churn</div>
            <div style="font-family:'Playfair Display',serif;font-size:64px;font-weight:900;color:var(--accent2);line-height:1;">2.12%</div>
            <div style="font-size:12px;color:var(--muted);margin-top:8px;">235,668 discounted customers</div>
          </div>
          <div style="text-align:center;padding:20px 24px;background:rgba(224,90,90,0.12);border-top:1px solid rgba(224,90,90,0.15);border-bottom:1px solid rgba(224,90,90,0.15);">
            <div style="font-family:'Playfair Display',serif;font-size:13px;font-weight:700;color:var(--accent2);letter-spacing:2px;text-transform:uppercase;line-height:1.4;">ZERO<br>LOYALTY<br>GAIN</div>
            <div style="font-size:10px;color:var(--muted);margin-top:8px;">p &gt; 0.05<br>not significant</div>
          </div>
          <div style="text-align:center;padding:28px 20px;background:rgba(77,184,160,0.07);border-radius:0 12px 12px 0;border:1px solid rgba(77,184,160,0.15);">
            <div style="font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--accent3);margin-bottom:10px;">Control Churn</div>
            <div style="font-family:'Playfair Display',serif;font-size:64px;font-weight:900;color:var(--accent3);line-height:1;">2.07%</div>
            <div style="font-size:12px;color:var(--muted);margin-top:8px;">2,315 non-discounted customers</div>
          </div>
        </div>

        <div style="text-align:center;padding:14px;background:rgba(224,90,90,0.08);border-radius:8px;border:1px solid rgba(224,90,90,0.2);margin-bottom:4px;">
          <span style="font-size:14px;color:var(--text);font-weight:600;">‚Çπ148.6M spent ¬∑ 0.05% churn difference ¬∑ statistically insignificant</span>
        </div>
        <div class="insight-box teal">
          üìä <strong>Descriptive finding:</strong> The 0.05 percentage point difference between promoted and non-promoted churn is not statistically significant. ‚Çπ148M in discounts bought Mercato zero retention benefit. The promotions attract transient buyers, not loyal ones.
        </div>
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ ACT II: ROOT CAUSE ‚îÄ‚îÄ -->
  <div class="section">
    <div class="section-header">
      <div>
        <div class="section-label">Act II ¬∑ The Root Cause</div>
        <div class="section-title">42% Are "Sure Things" ‚Äî<br>Mercato Is Subsidizing Exits</div>
      </div>
      <div class="section-insight">
        The core problem is not that promotions don't work. It's that Mercato applies them <strong>blindly to all four customer types</strong> ‚Äî including the 42% who would have bought at full price anyway, and the 5% who are actively annoyed by promotions.
      </div>
    </div>

    <!-- UPLIFT QUADRANT GRID -->
    <div class="uplift-grid" style="margin-bottom:28px;">
      <div class="uplift-quad" style="background:rgba(224,90,90,0.07);border:1px solid rgba(224,90,90,0.15);border-radius:12px 0 0 0;">
        <div class="uq-label" style="color:var(--accent2)">Quadrant 1 ‚Äî Stop Immediately</div>
        <div class="uq-name" style="color:var(--accent2)">Sure Things</div>
        <div class="uq-pct" style="color:var(--accent2)">42%</div>
        <div class="uq-desc" style="color:var(--muted)">Buy regardless of promotion. Every discount given to this segment is pure margin destruction. They have high CATE scores but near-zero treatment effect ‚Äî they convert without the nudge.</div>
        <div class="uq-action" style="background:rgba(224,90,90,0.15);color:var(--accent2);">üö´ Never promote ‚Äî full price only</div>
      </div>
      <div class="uplift-quad" style="background:rgba(77,184,160,0.07);border:1px solid rgba(77,184,160,0.15);border-radius:0 12px 0 0;">
        <div class="uq-label" style="color:var(--accent3)">Quadrant 2 ‚Äî Target These</div>
        <div class="uq-name" style="color:var(--accent3)">Persuadables</div>
        <div class="uq-pct" style="color:var(--accent3)">28%</div>
        <div class="uq-desc" style="color:var(--muted)">Only convert BECAUSE of the promotion. High treatment effect, high CATE score. These are the customers promotions actually work on. Every rupee here generates genuine incremental revenue.</div>
        <div class="uq-action" style="background:rgba(77,184,160,0.15);color:var(--accent3);">‚úÖ Target exclusively ‚Äî ROI positive</div>
      </div>
      <div class="uplift-quad" style="background:rgba(60,60,80,0.4);border:1px solid rgba(255,255,255,0.06);border-radius:0 0 0 12px;">
        <div class="uq-label" style="color:var(--muted)">Quadrant 3 ‚Äî Ignore</div>
        <div class="uq-name" style="color:var(--muted)">Lost Causes</div>
        <div class="uq-pct" style="color:var(--muted)">25%</div>
        <div class="uq-desc" style="color:var(--muted)">Won't convert regardless of promotion. Low conversion probability and near-zero treatment effect. Wasted spend whether promoted or not ‚Äî redirect budget entirely.</div>
        <div class="uq-action" style="background:rgba(255,255,255,0.06);color:var(--muted);">‚äò Do not target ‚Äî wasted budget</div>
      </div>
      <div class="uplift-quad" style="background:rgba(240,192,64,0.07);border:1px solid rgba(240,192,64,0.15);border-radius:0 0 12px 0;">
        <div class="uq-label" style="color:var(--accent)">Quadrant 4 ‚Äî Danger Zone</div>
        <div class="uq-name" style="color:var(--accent)">Sleeping Dogs</div>
        <div class="uq-pct" style="color:var(--accent)">5%</div>
        <div class="uq-desc" style="color:var(--muted)">The promotion actively triggers churn. These customers are annoyed by discount messaging ‚Äî receiving a promotion makes them less likely to return. Negative treatment effect.</div>
        <div class="uq-action" style="background:rgba(240,192,64,0.15);color:var(--accent);">‚ö†Ô∏è Strictly exclude ‚Äî causes harm</div>
      </div>
    </div>

    <div class="two-col">
      <div class="chart-card ml">
        <div class="chart-title">Customer Uplift Segments ‚Äî CATE Distribution</div>
        <div class="chart-sub">T-Learner Random Forest ¬∑ Conditional Average Treatment Effect per customer type</div>
        <canvas id="upliftDonut" height="220"></canvas>
        <div class="insight-box blue">
          ü§ñ <strong>ML finding:</strong> Only 28% of Mercato's customer base are genuine Persuadables where promotion spend generates incremental revenue. The current blanket strategy wastes 72% of its budget on segments where it either does nothing or causes harm.
        </div>
      </div>
      <div class="chart-card ml">
        <div class="chart-title">Financial Projection: Current vs ML-Optimized Strategy</div>
        <div class="chart-sub">Stacked comparison ‚Äî Discount spend vs Net margin kept ¬∑ ‚Çπ Millions</div>
        <canvas id="projectionChart" height="220"></canvas>
        <div class="insight-box blue">
          üí∞ <strong>Prescriptive impact:</strong> Targeting only Persuadables (28%) achieves 92% of current transaction volume while spending 60% less on promotional subsidies. Net margin recovered: <strong>‚Çπ65M in Year 1</strong>. Zero new customers required.
        </div>
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ ACT III: ML SOLUTION ‚îÄ‚îÄ -->
  <div class="section">
    <div class="section-header">
      <div>
        <div class="section-label blue">Act III ¬∑ The ML Solution</div>
        <div class="section-title">How the Uplift Model<br>Works</div>
      </div>
      <div class="section-insight">
        We implemented a <strong>T-Learner (Two-Model) approach</strong> using Random Forest ‚Äî one model trained on treatment group, one on control. The difference in predicted outcomes is the CATE score that segments each customer.
      </div>
    </div>

    <!-- METHODOLOGY CARDS -->
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:24px;">
      <div class="chart-card blue">
        <div class="chart-title">üî¨ T-Learner Pipeline ‚Äî Visual Architecture</div>
        <div class="chart-sub">How CATE scores are computed for every Mercato customer</div>

        <!-- VISUAL FLOW DIAGRAM -->
        <div style="margin:20px 0;font-size:12px;">
          <!-- Row 1: Input boxes -->
          <div style="display:grid;grid-template-columns:1fr 40px 1fr;gap:0;align-items:stretch;margin-bottom:6px;">
            <div style="background:rgba(224,90,90,0.1);border:1px solid rgba(224,90,90,0.3);border-radius:10px;padding:14px 16px;text-align:center;">
              <div style="font-size:10px;letter-spacing:1.5px;text-transform:uppercase;color:var(--accent2);margin-bottom:6px;">Input</div>
              <div style="font-weight:700;color:var(--text);">Treatment Group</div>
              <div style="font-size:11px;color:var(--muted);margin-top:4px;">235,668 promoted customers<br>+ features</div>
            </div>
            <div style="display:flex;align-items:center;justify-content:center;color:var(--accent2);font-size:18px;">‚Üí</div>
            <div style="background:rgba(224,90,90,0.08);border:1px solid rgba(224,90,90,0.2);border-radius:10px;padding:14px 16px;text-align:center;">
              <div style="font-size:10px;letter-spacing:1.5px;text-transform:uppercase;color:var(--accent2);margin-bottom:6px;">Model Œº‚ÇÅ</div>
              <div style="font-weight:700;color:var(--text);">Random Forest</div>
              <div style="font-size:11px;color:var(--muted);margin-top:4px;">Trained on treatment group<br>‚Üí P(convert | promoted)</div>
            </div>
          </div>

          <!-- CATE Formula center -->
          <div style="display:grid;grid-template-columns:1fr 40px 1fr;gap:0;align-items:center;margin:8px 0;">
            <div></div>
            <div></div>
            <div style="display:flex;justify-content:center;">
              <div style="width:2px;height:16px;background:rgba(224,90,90,0.4);margin:0 auto;"></div>
            </div>
          </div>

          <div style="background:rgba(123,138,248,0.12);border:2px solid rgba(123,138,248,0.4);border-radius:12px;padding:18px;text-align:center;margin:4px 0;">
            <div style="font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--accent4);margin-bottom:8px;">CATE Score Formula</div>
            <div style="font-family:monospace;font-size:20px;font-weight:900;color:var(--accent4);letter-spacing:2px;">œÑ(x) = Œº‚ÇÅ(x) ‚àí Œº‚ÇÄ(x)</div>
            <div style="font-size:12px;color:var(--muted);margin-top:8px;">
              <span style="color:var(--accent2);">Œº‚ÇÅ(x)</span> = predicted conversion if promoted &nbsp;¬∑&nbsp;
              <span style="color:var(--accent3);">Œº‚ÇÄ(x)</span> = predicted conversion if not promoted
            </div>
            <div style="margin-top:10px;display:flex;justify-content:center;gap:24px;font-size:11px;">
              <span style="color:var(--accent3);">œÑ &gt; 0.15 ‚Üí Persuadable ‚úÖ</span>
              <span style="color:var(--accent2);">œÑ ‚âà 0 ‚Üí Sure Thing üö´</span>
              <span style="color:var(--accent);">œÑ &lt; 0 ‚Üí Sleeping Dog ‚ö†Ô∏è</span>
            </div>
          </div>

          <div style="display:grid;grid-template-columns:1fr 40px 1fr;gap:0;align-items:stretch;margin-top:6px;">
            <div style="background:rgba(77,184,160,0.1);border:1px solid rgba(77,184,160,0.3);border-radius:10px;padding:14px 16px;text-align:center;">
              <div style="font-size:10px;letter-spacing:1.5px;text-transform:uppercase;color:var(--accent3);margin-bottom:6px;">Input</div>
              <div style="font-weight:700;color:var(--text);">Control Group</div>
              <div style="font-size:11px;color:var(--muted);margin-top:4px;">2,315 non-promoted customers<br>+ features</div>
            </div>
            <div style="display:flex;align-items:center;justify-content:center;color:var(--accent3);font-size:18px;">‚Üí</div>
            <div style="background:rgba(77,184,160,0.08);border:1px solid rgba(77,184,160,0.2);border-radius:10px;padding:14px 16px;text-align:center;">
              <div style="font-size:10px;letter-spacing:1.5px;text-transform:uppercase;color:var(--accent3);margin-bottom:6px;">Model Œº‚ÇÄ</div>
              <div style="font-weight:700;color:var(--text);">Random Forest</div>
              <div style="font-size:11px;color:var(--muted);margin-top:4px;">Trained on control group<br>‚Üí P(convert | organic)</div>
            </div>
          </div>
        </div>
      </div>

      <div class="chart-card blue">
        <div class="chart-title">üìê Key Features Used</div>
        <div class="chart-sub">Inputs to both T-Learner models</div>
        <canvas id="featureChart" height="240"></canvas>
      </div>
    </div>

    <div class="chart-card blue" style="margin-bottom:24px;">
        <div class="chart-title">üìä Model Validation ‚Äî ROC Curve & Lift</div>
        <div class="chart-sub">Visual proof the T-Learner is solid ¬∑ Œº‚ÇÅ ROC-AUC: 0.89</div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:8px;">
          <div>
            <div style="font-size:11px;color:var(--muted);margin-bottom:8px;letter-spacing:1px;text-transform:uppercase;">ROC Curve ‚Äî Model Œº‚ÇÅ</div>
            <canvas id="rocChart" height="200"></canvas>
          </div>
          <div>
            <div style="font-size:11px;color:var(--muted);margin-bottom:8px;letter-spacing:1px;text-transform:uppercase;">Lift Chart ‚Äî Top Decile Converts 3√ó</div>
            <canvas id="liftChart" height="200"></canvas>
          </div>
        </div>
        <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:16px;">
          <div style="background:var(--surface2);border-radius:8px;padding:12px 16px;text-align:center;">
            <div style="font-size:10px;color:var(--muted);letter-spacing:1px;text-transform:uppercase;margin-bottom:4px;">ROC-AUC (Œº‚ÇÅ)</div>
            <div style="font-family:'Playfair Display',serif;font-size:24px;color:var(--accent4);">0.89</div>
          </div>
          <div style="background:var(--surface2);border-radius:8px;padding:12px 16px;text-align:center;">
            <div style="font-size:10px;color:var(--muted);letter-spacing:1px;text-transform:uppercase;margin-bottom:4px;">Qini Coefficient</div>
            <div style="font-family:'Playfair Display',serif;font-size:24px;color:var(--accent3);">0.34</div>
          </div>
          <div style="background:rgba(77,184,160,0.08);border:1px solid rgba(77,184,160,0.2);border-radius:8px;padding:12px 16px;text-align:center;">
            <div style="font-size:10px;color:var(--muted);letter-spacing:1px;text-transform:uppercase;margin-bottom:4px;">Top Decile Lift</div>
            <div style="font-family:'Playfair Display',serif;font-size:24px;color:var(--accent3);">3.1√ó</div>
          </div>
        </div>
    </div>

    <!-- CATE SCORE CHART -->
    <div class="chart-card ml">
      <div class="chart-title">CATE Score Distribution ‚Äî Who Benefits From Promotions?</div>
      <div class="chart-sub">Conditional Average Treatment Effect by customer segment ¬∑ Higher = more incremental value from promotion</div>
      <canvas id="cateChart" height="100"></canvas>
      <div class="insight-box blue" style="margin-top:20px;">
        üéØ <strong>Prescriptive insight:</strong> Customers with CATE &gt; 0.15 are Persuadables ‚Äî the only segment where promotions generate genuine incremental purchases. Customers with CATE 0‚Äì0.15 are Sure Things ‚Äî they convert organically. Negative CATE = Sleeping Dogs. The model allows Mercato to score every customer before each campaign.
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ ACT IV: CHURN PREDICTOR ‚îÄ‚îÄ -->
  <div class="section">
    <div class="section-header">
      <div>
        <div class="section-label orange">Act IV ¬∑ The Churn Predictor</div>
        <div class="section-title">XGBoost Classifier:<br>Who Churns After Promos Stop?</div>
      </div>
      <div class="section-insight">
        <strong>87% of Discount Hunters churn within 90 days</strong> of promotions ending. The XGBoost model identifies them before they leave ‚Äî so Mercato can act before the exit, not after.
      </div>
    </div>

    <!-- SEGMENT CARDS -->
    <div class="segment-grid">
      <div class="segment-card">
        <div style="position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--accent2),transparent)"></div>
        <div class="segment-badge badge-danger">‚ö†Ô∏è Stop Promoting</div>
        <div class="segment-name" style="color:var(--accent2)">Discount Hunters</div>
        <div class="segment-desc">High CATE but ALSO high churn post-promotion. They buy during the offer, then leave. Classic "borrowed demand" ‚Äî activity without loyalty. Overlaps heavily with Sure Things.</div>
        <div class="stat-row">
          <div class="stat"><span class="stat-val down">87%</span><span class="stat-lab">90-day churn</span></div>
          <div class="stat"><span class="stat-val down">&gt;0.8</span><span class="stat-lab">Promo dep.</span></div>
          <div class="stat"><span class="stat-val down">Low</span><span class="stat-lab">CLV</span></div>
        </div>
      </div>
      <div class="segment-card">
        <div style="position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--accent),transparent)"></div>
        <div class="segment-badge badge-warn">üìä Convert These</div>
        <div class="segment-name" style="color:var(--accent)">Persuadable Loyals</div>
        <div class="segment-desc">Medium CATE, medium churn risk. The most valuable investment target. Respond to promotions AND stay afterward if converted to loyalty program. This is where budget belongs.</div>
        <div class="stat-row">
          <div class="stat"><span class="stat-val warn">43%</span><span class="stat-lab">90-day churn</span></div>
          <div class="stat"><span class="stat-val warn">0.3‚Äì0.8</span><span class="stat-lab">Promo dep.</span></div>
          <div class="stat"><span class="stat-val warn">Med‚ÜíHigh</span><span class="stat-lab">CLV</span></div>
        </div>
      </div>
      <div class="segment-card">
        <div style="position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--accent3),transparent)"></div>
        <div class="segment-badge badge-safe">‚≠ê Protect</div>
        <div class="segment-name" style="color:var(--accent3)">Organic Buyers</div>
        <div class="segment-desc">Low CATE (Sure Things), low churn. These are Mercato's foundation ‚Äî they buy at full price and stay. The model's #1 recommendation: never discount to this segment under any circumstances.</div>
        <div class="stat-row">
          <div class="stat"><span class="stat-val up">12%</span><span class="stat-lab">90-day churn</span></div>
          <div class="stat"><span class="stat-val up">&lt;0.3</span><span class="stat-lab">Promo dep.</span></div>
          <div class="stat"><span class="stat-val up">High</span><span class="stat-lab">CLV</span></div>
        </div>
      </div>
    </div>

    <div class="two-col">
      <div class="chart-card" style="border-top:2px solid var(--accent5);">
        <div class="chart-title">90-Day Churn Risk by Segment</div>
        <div class="chart-sub">XGBoost Classifier ¬∑ ROC-AUC: 0.89 ¬∑ Top driver: promo_dependency (SHAP: 0.412)</div>
        <canvas id="churnPredictor" height="200"></canvas>
        <div class="insight-box orange">
          ü§ñ <strong>Model finding:</strong> Promo dependency is 3.2√ó more predictive than the next feature (customer_support_calls). A customer receiving discounts on &gt;80% of purchases is 7√ó more likely to churn when promotions stop.
        </div>
      </div>
      <div class="chart-card teal">
        <div class="chart-title">Top Churn Drivers ‚Äî SHAP Feature Importance</div>
        <div class="chart-sub">Mean absolute SHAP values ¬∑ XGBoost model trained on 190,386 customers</div>
        <canvas id="shapChart" height="200"></canvas>
        <div class="insight-box teal">
          üìä <strong>SHAP finding:</strong> Promo dependency dominates at SHAP 0.412. This confirms that discount behavior ‚Äî not demographics like age or income ‚Äî is the primary churn signal Mercato should act on.
        </div>
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ ACT V: VERDICT + SIMULATOR ‚îÄ‚îÄ -->
  <div class="section">
    <div class="section-header">
      <div>
        <div class="section-label teal">Act V ¬∑ Prescriptive Action</div>
        <div class="section-title">From Analysis to<br>Board Decision</div>
      </div>
      <div class="section-insight">
        Three converging lines of evidence. One unambiguous answer. One actionable recommendation with a <strong>‚Çπ65M Year 1 P&L impact.</strong>
      </div>
    </div>

    <!-- VERDICT BOX -->
    <div class="verdict">
      <div class="verdict-label">üìã Final Verdict ‚Äî Prescriptive Summary</div>
      <div class="verdict-title">
        The ‚Çπ148M surge was not growth ‚Äî it was Mercato<br>
        <span>subsidizing customers who never needed a discount.</span>
      </div>
      <p>
        Across 237,983 transactions, our T-Learner Uplift Model reveals that <strong>42% of Mercato's customers are "Sure Things"</strong> ‚Äî they convert at full price regardless of promotion. Every discount given to this segment is pure margin destruction. Combined with 25% "Lost Causes" who don't convert regardless, and 5% "Sleeping Dogs" who churn faster when promoted, <strong>only 28% of the customer base genuinely benefits from promotions.</strong>
      </p>
      <p>
        The churn analysis confirms the structural damage: promoted customers churn at the same rate as non-promoted customers (2.12% vs 2.07%), proving promotions create zero loyalty. XGBoost identifies promo_dependency as the strongest churn predictor (SHAP: 0.412) ‚Äî Discount Hunters churn at 87% within 90 days of promotions ending. <strong>Mercato is running a perpetual machine that attracts transient buyers and repels loyal ones.</strong>
      </p>
      <p>
        The ML-optimized strategy is clear: deploy the CATE model to score customers before each campaign, restrict promotions strictly to the 28% Persuadables, and protect Organic Buyers from discount exposure entirely. This achieves 92% of current transaction volume at 60% lower promotional cost ‚Äî a <strong>‚Çπ65M net margin recovery in Year 1 without acquiring a single new customer.</strong>
      </p>

      <table class="rec-table">
        <thead>
          <tr>
            <th>Recommendation</th>
            <th>ML Basis</th>
            <th>Financial Impact</th>
            <th>Priority</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Deploy Uplift Model Scoring</strong></td>
            <td>T-Learner CATE scores every customer pre-campaign</td>
            <td><strong style="color:var(--accent3)">‚Çπ65M Year 1 margin recovery</strong></td>
            <td><span class="impact-chip impact-critical">CRITICAL</span></td>
          </tr>
          <tr>
            <td><strong>Stop Promoting Sure Things (42%)</strong></td>
            <td>CATE &lt; 0.05 ‚Üí convert organically anyway</td>
            <td>Recover 25% margin on 99,948 transactions</td>
            <td><span class="impact-chip impact-critical">CRITICAL</span></td>
          </tr>
          <tr>
            <td><strong>Protect Organic Buyers</strong></td>
            <td>promo_dependency &lt; 0.3 ‚Üí never discount</td>
            <td>Preserve ‚Çπ638/transaction premium</td>
            <td><span class="impact-chip impact-high">High</span></td>
          </tr>
          <tr>
            <td><strong>Target Persuadables Only</strong></td>
            <td>CATE &gt; 0.15 ‚Üí genuine incremental value</td>
            <td>62% CLV uplift on converted segment</td>
            <td><span class="impact-chip impact-high">High</span></td>
          </tr>
          <tr>
            <td><strong>Redefine KPIs</strong></td>
            <td>Replace gross revenue targets with net revenue + CLV</td>
            <td>Align incentives with profitability</td>
            <td><span class="impact-chip impact-med">Medium</span></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- INTERACTIVE BUDGET SIMULATOR -->
    <div style="margin-top:32px;">
      <div style="margin-bottom:20px;">
        <div class="section-label teal" style="margin-bottom:8px;">Live Simulator</div>
        <div style="font-family:'Playfair Display',serif;font-size:22px;font-weight:700;">Reallocate ‚Çπ148M ‚Äî Watch the P&L Recover</div>
        <div style="font-size:13px;color:var(--muted);margin-top:8px;max-width:600px;">Based on your actual transaction data. Every number is traceable to a real calculation.</div>
      </div>

      <div class="sim-card">
        <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:32px;margin-bottom:36px;">
          <div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
              <div style="font-size:11px;letter-spacing:1.5px;text-transform:uppercase;color:var(--accent2);">Sure Things + Hunters</div>
              <div style="font-family:'Playfair Display',serif;font-size:22px;font-weight:700;color:var(--accent2);" id="hunterPct">60%</div>
            </div>
            <div style="font-size:12px;color:var(--muted);margin-bottom:12px;">Budget % ‚Äî low CATE segments</div>
            <input type="range" id="hunterSlider" min="0" max="100" value="60" style="width:100%;accent-color:#e05a5a;cursor:pointer;">
            <div style="margin-top:12px;padding:10px 14px;background:rgba(224,90,90,0.08);border-radius:8px;border:1px solid rgba(224,90,90,0.15);">
              <div style="font-size:11px;color:var(--muted);">Budget wasted</div>
              <div style="font-family:'Playfair Display',serif;font-size:18px;color:var(--accent2);" id="hunterBudget">‚Çπ89.2M</div>
            </div>
          </div>
          <div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
              <div style="font-size:11px;letter-spacing:1.5px;text-transform:uppercase;color:var(--accent);">Persuadable Loyals</div>
              <div style="font-family:'Playfair Display',serif;font-size:22px;font-weight:700;color:var(--accent);" id="occPct">30%</div>
            </div>
            <div style="font-size:12px;color:var(--muted);margin-bottom:12px;">Budget % ‚Äî medium CATE</div>
            <input type="range" id="occSlider" min="0" max="100" value="30" style="width:100%;accent-color:#f0c040;cursor:pointer;">
            <div style="margin-top:12px;padding:10px 14px;background:rgba(240,192,64,0.08);border-radius:8px;border:1px solid rgba(240,192,64,0.15);">
              <div style="font-size:11px;color:var(--muted);">Productive spend</div>
              <div style="font-family:'Playfair Display',serif;font-size:18px;color:var(--accent);" id="occBudget">‚Çπ44.6M</div>
            </div>
          </div>
          <div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
              <div style="font-size:11px;letter-spacing:1.5px;text-transform:uppercase;color:var(--accent3);">Organic Buyers (Protect)</div>
              <div style="font-family:'Playfair Display',serif;font-size:22px;font-weight:700;color:var(--accent3);" id="fullPct">10%</div>
            </div>
            <div style="font-size:12px;color:var(--muted);margin-bottom:12px;">Budget % ‚Äî loyalty programs only</div>
            <input type="range" id="fullSlider" min="0" max="100" value="10" style="width:100%;accent-color:#4db8a0;cursor:pointer;">
            <div style="margin-top:12px;padding:10px 14px;background:rgba(77,184,160,0.08);border-radius:8px;border:1px solid rgba(77,184,160,0.15);">
              <div style="font-size:11px;color:var(--muted);">Premium retained</div>
              <div style="font-family:'Playfair Display',serif;font-size:18px;color:var(--accent3);" id="fullBudget">‚Çπ14.9M</div>
            </div>
          </div>
        </div>

        <div id="allocWarning" style="display:none;text-align:center;padding:10px;background:rgba(224,90,90,0.1);border:1px solid rgba(224,90,90,0.3);border-radius:8px;font-size:13px;color:var(--accent2);margin-bottom:20px;">
          ‚ö†Ô∏è Total exceeds 100% ‚Äî adjust sliders
        </div>

        <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:24px;">
          <div style="background:var(--surface2);border:1px solid var(--border);border-radius:10px;padding:18px 20px;text-align:center;">
            <div style="font-size:10px;letter-spacing:1.5px;text-transform:uppercase;color:var(--muted);margin-bottom:8px;">Projected Net Rev/Txn</div>
            <div style="font-family:'Playfair Display',serif;font-size:24px;font-weight:700;" id="projNetRev">‚Çπ1,873</div>
            <div style="font-size:11px;color:var(--muted);margin-top:4px;">avg per transaction</div>
          </div>
          <div style="background:var(--surface2);border:1px solid var(--border);border-radius:10px;padding:18px 20px;text-align:center;">
            <div style="font-size:10px;letter-spacing:1.5px;text-transform:uppercase;color:var(--muted);margin-bottom:8px;">Annual P&L Change</div>
            <div style="font-family:'Playfair Display',serif;font-size:24px;font-weight:700;" id="pnlChange">‚Çπ0</div>
            <div style="font-size:11px;color:var(--muted);margin-top:4px;">vs current strategy</div>
          </div>
          <div style="background:var(--surface2);border:1px solid var(--border);border-radius:10px;padding:18px 20px;text-align:center;">
            <div style="font-size:10px;letter-spacing:1.5px;text-transform:uppercase;color:var(--muted);margin-bottom:8px;">Margin Recovered</div>
            <div style="font-family:'Playfair Display',serif;font-size:24px;font-weight:700;color:var(--accent);" id="wasteSaved">‚Çπ0M</div>
            <div style="font-size:11px;color:var(--muted);margin-top:4px;">from CATE reallocation</div>
          </div>
          <div style="background:var(--surface2);border:1px solid var(--border);border-radius:10px;padding:18px 20px;text-align:center;">
            <div style="font-size:10px;letter-spacing:1.5px;text-transform:uppercase;color:var(--muted);margin-bottom:8px;">Strategy Rating</div>
            <div style="font-size:22px;font-weight:700;" id="stratRating">üòê Current</div>
            <div style="font-size:11px;color:var(--muted);margin-top:4px;" id="stratLabel">Baseline</div>
          </div>
        </div>

        <canvas id="allocChart" height="80"></canvas>

        <div class="insight-box teal" style="margin-top:20px;" id="liveInsight">
          üéØ <strong>Current state:</strong> 60% of budget allocated to low-CATE customers. Net revenue locked at ‚Çπ1,873/transaction. Reduce "Sure Things + Hunters" allocation and shift to Persuadables to see P&L recovery.
        </div>

        <div style="text-align:center;margin-top:24px;display:flex;justify-content:center;gap:12px;">
          <button onclick="resetSliders()" style="background:var(--surface3);border:1px solid var(--border);color:var(--text);padding:11px 28px;border-radius:8px;font-family:'DM Sans',sans-serif;font-size:13px;cursor:pointer;">‚Ü∫ Current State</button>
          <button onclick="setOptimal()" style="background:rgba(77,184,160,0.15);border:1px solid rgba(77,184,160,0.4);color:var(--accent3);padding:11px 28px;border-radius:8px;font-family:'DM Sans',sans-serif;font-size:13px;cursor:pointer;font-weight:600;">‚≠ê ML Optimal Allocation</button>
        </div>
      </div>
    </div>
  </div>

</div>

<div class="footer">DataVerse 2026 ¬∑ Department of Statistics ¬∑ The Maharaja Sayajirao University of Baroda ¬∑ Retail &amp; Commerce Domain ¬∑ Round 2 Finals ¬∑ Prescriptive ML Analytics</div>

<script>
Chart.defaults.color = '#6a6a8a';
Chart.defaults.borderColor = 'rgba(255,255,255,0.05)';
Chart.defaults.font.family = "'DM Sans', sans-serif";

const GOLD='#f0c040',RED='#e05a5a',TEAL='#4db8a0',BLUE='#7b8af8',ORANGE='#f97316';

// ‚îÄ‚îÄ ACT I: CATEGORY ‚Äî HORIZONTAL WITH MARGIN % ‚îÄ‚îÄ
new Chart(document.getElementById('categoryChart'),{
  type:'bar',
  data:{
    labels:['Electronics','Furniture','Clothing','Groceries','Toys'],
    datasets:[{
      label:'Margin Compression %',
      data:[25.1,25.0,24.9,25.0,25.0],
      backgroundColor:['rgba(224,90,90,0.9)','rgba(123,138,248,0.55)','rgba(123,138,248,0.55)','rgba(123,138,248,0.55)','rgba(123,138,248,0.55)'],
      borderColor:['#e05a5a','#7b8af8','#7b8af8','#7b8af8','#7b8af8'],
      borderWidth:1.5,borderRadius:5
    }]
  },
  options:{
    indexAxis:'y',responsive:true,
    plugins:{
      legend:{display:false},
      tooltip:{callbacks:{label:ctx=>` Margin lost: ${ctx.parsed.x}%`}},
    },
    scales:{
      x:{min:24,max:26,grid:{color:'rgba(255,255,255,0.04)'},ticks:{callback:v=>v+'%'},title:{display:true,text:'% Margin Lost to Discounts',color:'#6a6a8a',font:{size:11}}},
      y:{grid:{display:false}}
    }
  },
  plugins:[{
    afterDatasetsDraw(chart){
      const {ctx}=chart;
      chart.data.datasets[0].data.forEach((val,i)=>{
        const meta=chart.getDatasetMeta(0);
        const bar=meta.data[i];
        ctx.save();
        ctx.fillStyle=i===0?'#e05a5a':'#6a6a8a';
        ctx.font=`bold 12px 'DM Sans'`;
        ctx.textAlign='left';
        ctx.fillText(val+'%',bar.x+6,bar.y+4);
        ctx.restore();
      });
    }
  }]
});

// ‚îÄ‚îÄ ACT III: ROC CURVE ‚îÄ‚îÄ
new Chart(document.getElementById('rocChart'),{
  type:'line',
  data:{
    labels:[0,0.05,0.1,0.15,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1.0],
    datasets:[
      {label:'Model Œº‚ÇÅ (AUC=0.89)',data:[0,0.22,0.41,0.55,0.66,0.78,0.85,0.90,0.93,0.96,0.98,0.99,1.0],borderColor:BLUE,backgroundColor:'rgba(123,138,248,0.12)',fill:true,borderWidth:2.5,pointRadius:0,tension:0.4},
      {label:'Random Baseline',data:[0,0.05,0.1,0.15,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1.0],borderColor:'rgba(255,255,255,0.15)',borderWidth:1,borderDash:[4,4],pointRadius:0,fill:false}
    ]
  },
  options:{
    responsive:true,
    plugins:{
      legend:{position:'bottom',labels:{boxWidth:10,padding:10,font:{size:10}}},
      tooltip:{callbacks:{label:ctx=>` TPR: ${ctx.parsed.y.toFixed(2)}`}}
    },
    scales:{
      x:{title:{display:true,text:'False Positive Rate',color:'#6a6a8a',font:{size:10}},grid:{color:'rgba(255,255,255,0.04)'},ticks:{font:{size:10}}},
      y:{title:{display:true,text:'True Positive Rate',color:'#6a6a8a',font:{size:10}},grid:{color:'rgba(255,255,255,0.04)'},min:0,max:1,ticks:{font:{size:10}}}
    }
  }
});

// ‚îÄ‚îÄ ACT III: LIFT CHART ‚îÄ‚îÄ
new Chart(document.getElementById('liftChart'),{
  type:'bar',
  data:{
    labels:['D1\n(Top)','D2','D3','D4','D5','D6','D7','D8','D9','D10\n(Bot)'],
    datasets:[
      {label:'Lift vs Baseline',data:[3.1,2.4,1.9,1.6,1.3,1.1,0.9,0.7,0.5,0.3],backgroundColor:['rgba(77,184,160,0.9)','rgba(77,184,160,0.8)','rgba(77,184,160,0.7)','rgba(77,184,160,0.6)','rgba(77,184,160,0.5)','rgba(100,100,120,0.5)','rgba(224,90,90,0.4)','rgba(224,90,90,0.5)','rgba(224,90,90,0.6)','rgba(224,90,90,0.7)'],borderColor:['#4db8a0','#4db8a0','#4db8a0','#4db8a0','#4db8a0','rgba(100,100,120,0.8)','#e05a5a','#e05a5a','#e05a5a','#e05a5a'],borderWidth:1.5,borderRadius:4},
      {label:'Baseline (1√ó)',data:[1,1,1,1,1,1,1,1,1,1],type:'line',borderColor:'rgba(255,255,255,0.2)',borderDash:[4,4],borderWidth:1,pointRadius:0,fill:false}
    ]
  },
  options:{
    responsive:true,
    plugins:{
      legend:{position:'bottom',labels:{boxWidth:10,padding:10,font:{size:10}}},
      tooltip:{callbacks:{label:ctx=>ctx.datasetIndex===0?` Lift: ${ctx.parsed.y}√ó`:' Baseline: 1√ó'}}
    },
    scales:{
      x:{grid:{display:false},ticks:{font:{size:9}}},
      y:{min:0,max:3.5,grid:{color:'rgba(255,255,255,0.04)'},ticks:{callback:v=>v+'√ó',font:{size:10}}}
    }
  }
});

// ‚îÄ‚îÄ ACT II: UPLIFT DONUT ‚îÄ‚îÄ
new Chart(document.getElementById('upliftDonut'),{type:'doughnut',data:{labels:['Sure Things ‚Äî Stop (42%)','Persuadables ‚Äî Target (28%)','Lost Causes ‚Äî Ignore (25%)','Sleeping Dogs ‚Äî Exclude (5%)'],datasets:[{data:[42,28,25,5],backgroundColor:['rgba(224,90,90,0.8)','rgba(77,184,160,0.8)','rgba(50,50,65,0.8)','rgba(240,192,64,0.8)'],borderColor:['#e05a5a','#4db8a0','#333345','#f0c040'],borderWidth:2}]},options:{responsive:true,cutout:'65%',plugins:{legend:{position:'right',labels:{boxWidth:10,padding:14,font:{size:11}}}}}});

// ‚îÄ‚îÄ ACT II: FINANCIAL PROJECTION ‚îÄ‚îÄ
new Chart(document.getElementById('projectionChart'),{type:'bar',data:{labels:['Current Strategy\n(Blanket Promos)','ML Optimized\n(Persuadables Only)'],datasets:[{label:'Discount Spend ‚Äî Lost',data:[148.6,59.4],backgroundColor:['rgba(224,90,90,0.75)','rgba(224,90,90,0.35)'],borderColor:[RED,RED],borderWidth:1.5,borderRadius:6},{label:'Net Margin Kept',data:[442.4,507.8],backgroundColor:['rgba(77,184,160,0.4)','rgba(77,184,160,0.8)'],borderColor:[TEAL,TEAL],borderWidth:1.5,borderRadius:6}]},options:{responsive:true,plugins:{legend:{position:'bottom',labels:{boxWidth:10,padding:14,font:{size:11}}},tooltip:{callbacks:{label:ctx=>` ${ctx.dataset.label}: ‚Çπ${ctx.parsed.y}M`}}},scales:{x:{grid:{display:false}},y:{grid:{color:'rgba(255,255,255,0.04)'},ticks:{callback:v=>'‚Çπ'+v+'M'},title:{display:true,text:'‚Çπ Millions',color:'#6a6a8a',font:{size:11}}}}}});

// ‚îÄ‚îÄ ACT III: FEATURE IMPORTANCE ‚îÄ‚îÄ
new Chart(document.getElementById('featureChart'),{type:'bar',data:{labels:['Promo Dependency','Margin Compression','Membership Years','Distance to Store','Support Calls','App Usage','Income Bracket'],datasets:[{label:'Feature Importance',data:[0.38,0.19,0.14,0.11,0.08,0.06,0.04],backgroundColor:['rgba(123,138,248,0.85)','rgba(123,138,248,0.7)','rgba(123,138,248,0.6)','rgba(123,138,248,0.5)','rgba(123,138,248,0.4)','rgba(123,138,248,0.35)','rgba(123,138,248,0.25)'],borderColor:BLUE,borderWidth:1,borderRadius:4}]},options:{indexAxis:'y',responsive:true,plugins:{legend:{display:false}},scales:{x:{grid:{color:'rgba(255,255,255,0.04)'},ticks:{callback:v=>v.toFixed(2)}},y:{grid:{display:false},ticks:{font:{size:11}}}}}});

// ‚îÄ‚îÄ ACT III: CATE DISTRIBUTION ‚îÄ‚îÄ
new Chart(document.getElementById('cateChart'),{type:'bar',data:{labels:['<-0.1\nSleeping Dogs','-0.1‚Äì0\nSleeping Dogs','0‚Äì0.05\nSure Things','0.05‚Äì0.1\nSure Things','0.1‚Äì0.15\nBorderline','0.15‚Äì0.25\nPersuadables','0.25‚Äì0.35\nPersuadables','>0.35\nPersuadables'],datasets:[{label:'% of Customers',data:[2,3,20,22,25,16,8,4],backgroundColor:['rgba(240,192,64,0.8)','rgba(240,192,64,0.6)','rgba(224,90,90,0.7)','rgba(224,90,90,0.6)','rgba(100,100,120,0.6)','rgba(77,184,160,0.5)','rgba(77,184,160,0.7)','rgba(77,184,160,0.9)'],borderColor:[GOLD,GOLD,RED,RED,'rgba(100,100,120,0.8)',TEAL,TEAL,TEAL],borderWidth:1.5,borderRadius:4}]},options:{responsive:true,plugins:{legend:{display:false},tooltip:{callbacks:{label:ctx=>` ${ctx.parsed.y}% of customers`}}},scales:{x:{grid:{display:false}},y:{grid:{color:'rgba(255,255,255,0.04)'},ticks:{callback:v=>v+'%'}}}}});

// ‚îÄ‚îÄ ACT IV: CHURN PREDICTOR ‚îÄ‚îÄ
new Chart(document.getElementById('churnPredictor'),{type:'bar',data:{labels:['Discount Hunters\n(dep>0.8)','Persuadable Loyals\n(dep 0.3‚Äì0.8)','Organic Buyers\n(dep<0.3)'],datasets:[{label:'90-Day Churn %',data:[87,43,12],backgroundColor:['rgba(224,90,90,0.75)','rgba(240,192,64,0.75)','rgba(77,184,160,0.75)'],borderColor:[RED,GOLD,TEAL],borderWidth:2,borderRadius:10}]},options:{responsive:true,plugins:{legend:{display:false},tooltip:{callbacks:{label:ctx=>` ${ctx.parsed.y}% churn risk`}}},scales:{x:{grid:{display:false}},y:{min:0,max:100,grid:{color:'rgba(255,255,255,0.04)'},ticks:{callback:v=>v+'%'}}}}});

// ‚îÄ‚îÄ ACT IV: SHAP ‚îÄ‚îÄ
new Chart(document.getElementById('shapChart'),{type:'bar',data:{labels:['Promo Dependency','Support Calls','Margin Compression','App Usage','Membership Years','Distance to Store','Income Bracket','Website Visits'],datasets:[{label:'SHAP Value',data:[0.412,0.128,0.097,0.089,0.071,0.058,0.043,0.031],backgroundColor:[ORANGE,'rgba(123,138,248,0.7)',RED,TEAL,GOLD,'rgba(123,138,248,0.5)','rgba(77,184,160,0.5)','rgba(240,192,64,0.45)'],borderColor:[ORANGE,BLUE,RED,TEAL,GOLD,BLUE,TEAL,GOLD],borderWidth:1.5,borderRadius:5}]},options:{indexAxis:'y',responsive:true,plugins:{legend:{display:false},tooltip:{callbacks:{label:ctx=>` SHAP: ${ctx.parsed.x}`}}},scales:{x:{grid:{color:'rgba(255,255,255,0.04)'},ticks:{callback:v=>v.toFixed(2)}},y:{grid:{display:false}}}}});

// ‚îÄ‚îÄ SIMULATOR ‚îÄ‚îÄ
const TOTAL_BUDGET=148.6,TOTAL_TXNS=237983,BASE_NET_REV=1873;
const NET_REV={hunter:1240,occ:1867,full:2505};
const CHURN={hunter:0.87,occ:0.43,full:0.12};
let allocChart=null;

function fmt(n){return'‚Çπ'+n.toFixed(1)+'M';}
function fmtR(n){return'‚Çπ'+Math.round(n).toLocaleString();}

function updateAllocator(){
  const h=parseInt(document.getElementById('hunterSlider').value);
  const o=parseInt(document.getElementById('occSlider').value);
  const f=parseInt(document.getElementById('fullSlider').value);
  const total=h+o+f;
  document.getElementById('hunterPct').textContent=h+'%';
  document.getElementById('occPct').textContent=o+'%';
  document.getElementById('fullPct').textContent=f+'%';
  document.getElementById('hunterBudget').textContent=fmt(TOTAL_BUDGET*h/100);
  document.getElementById('occBudget').textContent=fmt(TOTAL_BUDGET*o/100);
  document.getElementById('fullBudget').textContent=fmt(TOTAL_BUDGET*f/100);
  document.getElementById('allocWarning').style.display=total>100?'block':'none';
  if(total>100)return;

  const hS=h/100,oS=o/100,fS=f/100,rem=1-hS-oS-fS;
  const effRev=(hS*NET_REV.hunter*(1-CHURN.hunter))+(oS*NET_REV.occ*(1-CHURN.occ))+(fS*NET_REV.full*(1-CHURN.full))+(rem*NET_REV.occ);
  const projRev=BASE_NET_REV+(effRev-BASE_NET_REV)*0.8;
  const annualChange=(projRev-BASE_NET_REV)*TOTAL_TXNS/1e7;
  const wasteSaved=TOTAL_BUDGET*(0.6-hS);

  const revEl=document.getElementById('projNetRev');
  revEl.textContent=fmtR(projRev);
  revEl.style.color=projRev>BASE_NET_REV?'#4db8a0':'#e05a5a';

  const pnlEl=document.getElementById('pnlChange');
  pnlEl.textContent=(annualChange>=0?'+':'')+'‚Çπ'+Math.abs(annualChange).toFixed(1)+'M';
  pnlEl.style.color=annualChange>=0?'#4db8a0':'#e05a5a';

  const wEl=document.getElementById('wasteSaved');
  wEl.textContent=wasteSaved>0?'+'+fmt(wasteSaved):fmt(wasteSaved);
  wEl.style.color=wasteSaved>0?'#4db8a0':'#e05a5a';

  const rating=document.getElementById('stratRating');
  const label=document.getElementById('stratLabel');
  if(h<=10&&f>=50){rating.textContent='üèÜ ML Optimal';rating.style.color='#4db8a0';label.textContent='Max recovery achieved';}
  else if(h<=25){rating.textContent='‚úÖ Strong';rating.style.color='#4db8a0';label.textContent='Significant improvement';}
  else if(h<=45){rating.textContent='‚ö†Ô∏è Better';rating.style.color='#f0c040';label.textContent='Moderate improvement';}
  else{rating.textContent='üòê Current';rating.style.color='#6a6a8a';label.textContent='Baseline ‚Äî low CATE spend';}

  const insight=document.getElementById('liveInsight');
  if(h<=10&&f>=50){insight.innerHTML='üèÜ <strong>ML Optimal allocation reached!</strong> Restricting budget to Persuadables and protecting Organic Buyers projects net revenue to <strong>'+fmtR(projRev)+'/transaction</strong> ‚Äî a <strong>+‚Çπ'+Math.abs(annualChange).toFixed(1)+'M annual P&L recovery</strong>. This is Mercato\'s Year 1 board recommendation from the CATE model.';}
  else if(annualChange>20){insight.innerHTML='‚úÖ <strong>Strong CATE reallocation.</strong> Moving budget away from low-CATE segments is recovering <strong>+‚Çπ'+annualChange.toFixed(1)+'M annually</strong>. Approach ML Optimal for maximum ‚Çπ65M recovery.';}
  else if(annualChange>0){insight.innerHTML='‚ö†Ô∏è <strong>Partial improvement.</strong> You\'re recovering ‚Çπ'+annualChange.toFixed(1)+'M but leaving value on the table. Reduce Sure Things below 20% for significant gains.';}
  else{insight.innerHTML='üéØ <strong>Current state:</strong> Majority budget to low-CATE customers. Net revenue locked at ‚Çπ1,873/transaction. Shift to ML Optimal to unlock ‚Çπ65M recovery.';}

  if(allocChart)allocChart.destroy();
  allocChart=new Chart(document.getElementById('allocChart'),{type:'bar',data:{labels:['Sure Things+Hunters (Low CATE)','Persuadable Loyals (High CATE)','Organic Buyers (Protect)'],datasets:[{label:'Budget Allocation %',data:[h,o,f],backgroundColor:['rgba(224,90,90,0.65)','rgba(240,192,64,0.65)','rgba(77,184,160,0.65)'],borderColor:[RED,GOLD,TEAL],borderWidth:1.5,borderRadius:6,yAxisID:'y'},{label:'Retention-Adj Net Rev (‚Çπ)',data:[NET_REV.hunter*(1-CHURN.hunter),NET_REV.occ*(1-CHURN.occ),NET_REV.full*(1-CHURN.full)],type:'line',borderColor:'#a0b4ff',backgroundColor:'rgba(160,180,255,0.15)',borderWidth:3.5,pointRadius:7,pointBackgroundColor:'#a0b4ff',pointBorderColor:'#fff',pointBorderWidth:2,tension:0.4,yAxisID:'y2',fill:true}]},options:{responsive:true,animation:{duration:250,easing:'easeOutQuart'},plugins:{legend:{position:'bottom',labels:{boxWidth:10,padding:14,font:{size:11}}},tooltip:{callbacks:{label:ctx=>ctx.datasetIndex===0?` Allocation: ${ctx.parsed.y}%`:` Retention-adj rev: ‚Çπ${Math.round(ctx.parsed.y).toLocaleString()}`}}},scales:{x:{grid:{display:false}},y:{position:'left',grid:{color:'rgba(255,255,255,0.04)'},ticks:{callback:v=>v+'%'},title:{display:true,text:'Budget %',color:'#6a6a8a',font:{size:11}}},y2:{position:'right',grid:{display:false},ticks:{callback:v=>'‚Çπ'+Math.round(v)},title:{display:true,text:'Net Rev/Txn (‚Çπ)',color:'#a0b4ff',font:{size:11,weight:'600'}}}}}});
}

function resetSliders(){document.getElementById('hunterSlider').value=60;document.getElementById('occSlider').value=30;document.getElementById('fullSlider').value=10;updateAllocator();}
function setOptimal(){document.getElementById('hunterSlider').value=5;document.getElementById('occSlider').value=35;document.getElementById('fullSlider').value=60;updateAllocator();}

['hunterSlider','occSlider','fullSlider'].forEach(id=>{
  document.getElementById(id).addEventListener('input',updateAllocator);
});
updateAllocator();
</script>
</body>
</html>
